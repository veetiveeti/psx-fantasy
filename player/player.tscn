[gd_scene load_steps=15 format=3 uid="uid://bpv3aloctwm68"]

[ext_resource type="Script" path="res://player/player.gd" id="1_d1c6h"]
[ext_resource type="PackedScene" uid="uid://db0vj2er1030w" path="res://player/lowpoly_human.glb" id="1_hwvs0"]
[ext_resource type="Texture2D" uid="uid://cyrx24trd4bq4" path="res://player/hp_bar.png" id="3_cvvwc"]
[ext_resource type="Shader" path="res://shaders/dash_effect.gdshader" id="4_0xxrq"]
[ext_resource type="FontFile" uid="uid://ch1217g2yvnil" path="res://assets/fonts/Jacquard24-Regular.ttf" id="5_xvin7"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_hep6y"]
bg_color = Color(0.937255, 0.517647, 0.466667, 0.658824)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0.376471, 0.231373, 0.223529, 1)
border_blend = true

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kpdvm"]
bg_color = Color(0.823529, 0.32549, 0.329412, 1)
border_width_left = 4
border_width_top = 4
border_width_right = 4
border_width_bottom = 4
border_color = Color(0.466667, 0.156863, 0.0941176, 1)
border_blend = true
shadow_color = Color(0.301961, 0.0862745, 0.0352941, 0.290196)
shadow_size = 2
shadow_offset = Vector2(2.08165e-12, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_gxjb1"]

[sub_resource type="AudioStreamWAV" id="AudioStreamWAV_34vsj"]

[sub_resource type="AudioStreamWAV" id="AudioStreamWAV_pjfgq"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_osg6u"]
shader = ExtResource("4_0xxrq")
shader_parameter/speed = 1.0
shader_parameter/line_color = Color(1, 1, 1, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_hfv16"]
bg_color = Color(0.141176, 0.129412, 0.254902, 0.211765)
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4
expand_margin_left = 4.0
expand_margin_top = 4.0
expand_margin_right = 4.0
expand_margin_bottom = 4.0

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_83jpa"]
bg_color = Color(0.027451, 0.0235294, 0.0745098, 1)
corner_radius_top_left = 8
corner_radius_top_right = 8
corner_radius_bottom_right = 8
corner_radius_bottom_left = 8
expand_margin_left = 2.0
expand_margin_top = 2.0
expand_margin_right = 2.0
expand_margin_bottom = 2.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_anjkf"]
radius = 0.799
height = 6.18

[node name="Player" groups=["player"] instance=ExtResource("1_hwvs0")]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0, 0, 0)
floor_max_angle = 1.309
floor_snap_length = 0.6
script = ExtResource("1_d1c6h")

[node name="Camera3D" type="Camera3D" parent="." index="0"]
transform = Transform3D(3.33333, 0, 0, 0, 3.2824, 0.580489, 0, -0.580489, 3.2824, -0.217519, 3.40177, -0.298728)

[node name="ProgressBar" type="ProgressBar" parent="Camera3D" index="0"]
offset_left = 15.0
offset_top = 16.0
offset_right = 103.0
offset_bottom = 24.0
theme_override_styles/background = SubResource("StyleBoxFlat_hep6y")
theme_override_styles/fill = SubResource("StyleBoxFlat_kpdvm")
value = 100.0
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="Camera3D" index="1"]
custom_minimum_size = Vector2(80, 20)
offset_left = 6.0
offset_top = 9.0
offset_right = 110.0
offset_bottom = 32.0
texture = ExtResource("3_cvvwc")
expand_mode = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="1"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 1.93005, -0.113318)
shape = SubResource("CapsuleShape3D_gxjb1")

[node name="AttackSounds" type="AudioStreamPlayer3D" parent="." index="2"]
stream = SubResource("AudioStreamWAV_34vsj")
volume_db = -2.286
max_db = -1.142

[node name="FootSounds" type="AudioStreamPlayer3D" parent="." index="3"]
transform = Transform3D(3.33333, 0, 0, 0, 3.33333, 0, 0, 0, 3.33333, 0, 0, 0)
stream = SubResource("AudioStreamWAV_pjfgq")
volume_db = -15.556
max_db = -12.555
pitch_scale = 0.93

[node name="HurtSounds" type="AudioStreamPlayer3D" parent="." index="4"]
stream = SubResource("AudioStreamWAV_34vsj")
volume_db = -11.429
max_db = -6.285

[node name="BlockSounds" type="AudioStreamPlayer3D" parent="." index="5"]
transform = Transform3D(3.33333, 0, 0, 0, 3.33333, 0, 0, 0, 3.33333, 0, 0, 0)
volume_db = -2.255
max_db = -2.25
pitch_scale = 1.2

[node name="DashSounds" type="AudioStreamPlayer3D" parent="." index="6"]
transform = Transform3D(3.33333, 0, 0, 0, 3.33333, 0, 0, 0, 3.33333, 0, 0, 0)
volume_db = -8.746
max_db = -8.419
pitch_scale = 1.2

[node name="CanvasLayer" type="CanvasLayer" parent="." index="7"]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer" index="0"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.0248023, 0.0287753, 0.0805805, 1)
metadata/_edit_use_anchors_ = true

[node name="DashEffect" type="ColorRect" parent="CanvasLayer" index="1"]
material = SubResource("ShaderMaterial_osg6u")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="CoinCounter" type="Label" parent="CanvasLayer" index="2"]
offset_left = 252.0
offset_top = 10.0
offset_right = 292.0
offset_bottom = 33.0
theme_override_colors/font_color = Color(1, 0.87468, 0.398428, 1)
theme_override_colors/font_shadow_color = Color(0.206914, 0.206914, 0.206914, 1)
theme_override_fonts/font = ExtResource("5_xvin7")

[node name="InteractionText" type="Label" parent="CanvasLayer" index="3"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0.796078)
theme_override_fonts/font = ExtResource("5_xvin7")

[node name="VictoryScreen" type="ColorRect" parent="CanvasLayer" index="4"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
color = Color(0.0259954, 0.0195008, 0.0757915, 1)

[node name="Label" type="Label" parent="CanvasLayer/VictoryScreen" index="0"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -46.5
offset_top = -11.5
offset_right = 46.5
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_fonts/font = ExtResource("5_xvin7")
text = "Level completed!"

[node name="RestartButton" type="Button" parent="CanvasLayer/VictoryScreen" index="1"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -28.0
offset_top = 17.0
offset_right = 29.0
offset_bottom = 34.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("5_xvin7")
theme_override_font_sizes/font_size = 11
theme_override_styles/hover = SubResource("StyleBoxFlat_hfv16")
theme_override_styles/normal = SubResource("StyleBoxFlat_83jpa")
text = "Try again"

[node name="SpotLight3D" type="SpotLight3D" parent="." index="8"]
transform = Transform3D(3.33333, 0, 0, 0, 3.30168, 0.458264, 0, -0.458264, 3.30168, 0.0494785, 3.83853, 1.61818)
light_color = Color(0.915084, 0.775354, 0.566474, 1)
light_energy = 0.7
spot_range = 4.192
spot_angle = 50.0

[node name="Armature" parent="." index="9"]
transform = Transform3D(0, 0, 1, 0, 1, 0, -1, 0, 0, 0, 0.0100059, 0)

[node name="Skeleton3D" parent="Armature" index="0"]
transform = Transform3D(1, -0.000524032, -0.000188468, 0.000524106, 1, 0.000360137, 0.000188264, -0.000360244, 1, 0, 0, 0)
bones/0/position = Vector3(0.0169582, 1.80542, 7.41265e-10)
bones/0/rotation = Quaternion(3.57396e-09, 0, -0.0817627, 0.996652)
bones/1/position = Vector3(-0.0263245, 1.07982, -0.407491)
bones/1/rotation = Quaternion(0.869319, -0.476871, 0.0543823, -0.117988)
bones/1/scale = Vector3(1, 1, 0.999999)
bones/2/rotation = Quaternion(-0.0740301, 0.0893003, -0.328894, 0.937216)
bones/3/rotation = Quaternion(0.132119, 0.0143553, -0.0392253, 0.990354)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.127974, -0.0203825, 0.0693664, 0.989139)
bones/5/rotation = Quaternion(-0.25812, 0.00528112, -0.0251532, 0.965771)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(-0.464485, 0.0546742, -0.157031, 0.869831)
bones/7/rotation = Quaternion(0.325421, -0.0309545, 0.126843, 0.936512)
bones/8/rotation = Quaternion(0.798631, 0.596621, -0.0789321, -0.00139997)
bones/8/scale = Vector3(1, 1, 1)
bones/9/rotation = Quaternion(0.0979858, -0.00124713, 0.737942, 0.667712)
bones/9/scale = Vector3(1, 1, 1)
bones/10/rotation = Quaternion(0.00119574, 0.106558, -0.520566, 0.847145)
bones/12/scale = Vector3(1, 1, 1)
bones/13/scale = Vector3(1, 1, 1)
bones/14/position = Vector3(0.0866111, 1.06439, 0.407477)
bones/14/rotation = Quaternion(0.940053, -0.290991, -0.145801, 0.101818)
bones/14/scale = Vector3(1, 1, 0.999999)
bones/15/rotation = Quaternion(0.373206, 0.830217, -0.189668, 0.36808)
bones/16/rotation = Quaternion(-0.127854, 0.0707999, -0.0514492, 0.987924)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(0.123663, -0.0992238, 0.0767848, 0.984361)
bones/18/rotation = Quaternion(0.257223, 0.0249649, -0.0330898, 0.965463)
bones/19/rotation = Quaternion(0.61716, 0.585067, -0.421379, 0.31504)
bones/19/scale = Vector3(0.354739, 0.354739, 0.354739)
bones/20/rotation = Quaternion(0.518096, -0.19959, -0.181916, 0.811571)
bones/21/rotation = Quaternion(-0.388433, 0.182437, 0.161297, 0.888718)
bones/22/rotation = Quaternion(0.995447, -0.0272558, 0.0875271, 0.0260929)
bones/22/scale = Vector3(1, 1, 1)
bones/23/rotation = Quaternion(-0.0515287, -0.0058762, 0.408294, 0.911376)
bones/24/rotation = Quaternion(0.22286, 0.133891, -0.690193, 0.675308)
bones/25/rotation = Quaternion(0.493389, 0.50526, -0.495023, 0.506193)
bones/25/scale = Vector3(1, 1, 1)
bones/26/position = Vector3(2.31207, 1.01138, -0.707727)
bones/27/position = Vector3(0.413445, 0.703914, -0.309667)
bones/27/rotation = Quaternion(0.934798, -0.353916, -0.0280088, -0.0106042)
bones/27/scale = Vector3(1, 1, 1)
bones/28/position = Vector3(2.31021, 1.00805, 0.661158)
bones/29/position = Vector3(-0.942767, 0.490829, 0.263959)
bones/29/rotation = Quaternion(-0.124418, -0.139629, 0.399302, 0.897542)
bones/29/scale = Vector3(1, 1, 1)

[node name="shortsword" parent="Armature/Skeleton3D" index="0"]
transform = Transform3D(-0.272725, -0.14605, -0.17358, -0.198349, 0.0218045, 0.293295, -0.110083, 0.322543, -0.0984258, 0.0300904, 1.83109, 0.608254)

[node name="Area3D" type="Area3D" parent="Armature/Skeleton3D/shortsword/shortsword" index="0"]
transform = Transform3D(1, -4.65661e-08, 9.31323e-09, 8.3819e-09, 1, -1.78814e-07, 1.02445e-08, -8.9407e-08, 1, 0.254957, 1.28824, 0.240007)
monitoring = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="Armature/Skeleton3D/shortsword/shortsword/Area3D" index="0"]
transform = Transform3D(1, 6.0536e-09, -9.31323e-10, 1.25729e-08, 1, 0, 2.79397e-09, -2.98023e-08, 1, -0.0215354, 0.00162983, 0.00105071)
shape = SubResource("CapsuleShape3D_anjkf")

[node name="AnimationPlayer" parent="." index="10"]
autoplay = "idle"
speed_scale = 0.9

[connection signal="pressed" from="CanvasLayer/VictoryScreen/RestartButton" to="." method="_on_restart_button_pressed"]
[connection signal="body_entered" from="Armature/Skeleton3D/shortsword/shortsword/Area3D" to="." method="_on_area_3d_body_entered"]
[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
